<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    html {
        background-color: blue;
        display:flex;
        justify-content: center;
        align-items: center;
    }
</style>
<body>
    <canvas id="canvas" ></canvas>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        var socket = io(); 
        let x , y, lastX=0, lastY=0;  
        let interval
        
        socket.on('draw',({x,y,x2,y2})=>{
            ctx.fillStyle='black'; 
           if(lastX != x || lastY != y){
            ctx.beginPath();
            ctx.moveTo(x2, y2);
            ctx.lineWidth =5;
            ctx.lineCap = 'round';
            ctx.lineTo(x,y)
            ctx.stroke();
           }
           lastX= x, lastY= y;
        })
        let canvas = document.getElementById('canvas');
        let ctx = canvas.getContext('2d');
        function setCanvas(){
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight - 100;
        }
        setCanvas()
       
        canvas.addEventListener('mousemove', (evt)=>{
            x = evt.offsetX
            y = evt.offsetY
            
        })
      
        canvas.addEventListener('mousedown', (evt)=>{
            lastX = x;
            lastY = y;
            interval = setInterval(()=>{
            socket.emit('position', {x: x, y: y, x2: lastX, y2 :lastY})
        }, 0)
        })
       
        canvas.addEventListener('mouseup', ()=>{
            clearInterval(interval);
        })
        ctx.fillStyle = 'white'
        ctx.fillRect(0,0,canvas.width, canvas.height);
    </script>
</body>
</html>